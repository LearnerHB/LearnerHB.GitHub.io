<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>Data Visualization | Bing&#39;s Blog | Innovating Today. Imagining Tomorrow.</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="Data Science">
    <meta name="description" content="IBM Data Science课程关于数据可视化的练习">
<meta name="keywords" content="Data Science">
<meta property="og:type" content="article">
<meta property="og:title" content="Data Visualization">
<meta property="og:url" content="http://bingcs.com/2019/11/30/data-visualization/index.html">
<meta property="og:site_name" content="Bing&#39;s Blog">
<meta property="og:description" content="IBM Data Science课程关于数据可视化的练习">
<meta property="og:locale" content="default">
<meta property="og:image" content="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-11-30-142542.png">
<meta property="og:image" content="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-12-04-063350.png">
<meta property="og:image" content="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-12-04-063428.png">
<meta property="og:image" content="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-12-04-063525.png">
<meta property="og:image" content="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-12-04-065232.png">
<meta property="og:image" content="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-12-04-071843.png">
<meta property="og:image" content="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-12-04-072236.png">
<meta property="og:image" content="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-12-04-073601.png">
<meta property="og:image" content="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-12-04-075236.png">
<meta property="og:image" content="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-12-04-080530.png">
<meta property="og:image" content="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-12-04-083404.png">
<meta property="og:image" content="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-12-04-083904.png">
<meta property="og:image" content="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-12-04-085254.png">
<meta property="og:image" content="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-12-04-090828.png">
<meta property="og:image" content="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-12-04-091058.png">
<meta property="og:image" content="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-12-04-091507.png">
<meta property="og:image" content="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-12-04-092007.png">
<meta property="og:updated_time" content="2020-09-30T01:39:00.174Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Data Visualization">
<meta name="twitter:description" content="IBM Data Science课程关于数据可视化的练习">
<meta name="twitter:image" content="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-11-30-142542.png">
    
        <link rel="alternate" type="application/atom+xml" title="Bing&#39;s Blog" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Hu Bing</h5>
          <a href="mailto:634206017@qq.com" title="634206017@qq.com" class="mail">634206017@qq.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/yscoder" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://www.weibo.com/ysweb" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/custom"  >
                <i class="icon icon-lg icon-link"></i>
                测试
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Data Visualization</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">Data Visualization</h1>
        <h5 class="subtitle">
            
                <time datetime="2019-11-30T04:16:41.000Z" itemprop="datePublished" class="page-time">
  2019-11-30
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Tech/">Tech</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#0-Datasets-Used"><span class="post-toc-number">1.</span> <span class="post-toc-text">0. Datasets Used</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-Pandas-Basic"><span class="post-toc-number">2.</span> <span class="post-toc-text">1. Pandas Basic</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2-Matplotlib"><span class="post-toc-number">3.</span> <span class="post-toc-text">2. Matplotlib</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-1-Line-Plots"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">2.1 Line Plots</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-2-Area-Plots"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">2.2 Area Plots</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-3-Histograms"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">2.3 Histograms</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-4-Dar-Charts"><span class="post-toc-number">3.4.</span> <span class="post-toc-text">2.4 Dar Charts</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-5-Pie-Charts"><span class="post-toc-number">3.5.</span> <span class="post-toc-text">2.5 Pie Charts</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-6-Box-Plots"><span class="post-toc-number">3.6.</span> <span class="post-toc-text">2.6 Box Plots</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-7-Scatter-Plots"><span class="post-toc-number">3.7.</span> <span class="post-toc-text">2.7 Scatter Plots</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-8-Bubble-Plots"><span class="post-toc-number">3.8.</span> <span class="post-toc-text">2.8 Bubble Plots</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-9-Waffle-Charts"><span class="post-toc-number">3.9.</span> <span class="post-toc-text">2.9 Waffle Charts</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-10-Word-Clouds"><span class="post-toc-number">3.10.</span> <span class="post-toc-text">2.10 Word Clouds</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-11-Regression-Plots"><span class="post-toc-number">3.11.</span> <span class="post-toc-text">2.11 Regression Plots</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3-Generating-Maps"><span class="post-toc-number">4.</span> <span class="post-toc-text">3. Generating Maps</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Maps-with-Markers"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">Maps with Markers</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Choropleth-Map"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">Choropleth Map</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#4-Assignment"><span class="post-toc-number">5.</span> <span class="post-toc-text">4. Assignment</span></a></li></ol>
        </nav>
    </aside>


<article id="post-data-visualization"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Data Visualization</h1>
        <div class="post-meta">
            <time class="post-time" title="2019-11-30 12:16:41" datetime="2019-11-30T04:16:41.000Z"  itemprop="datePublished">2019-11-30</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Tech/">Tech</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <a id="more"></a>

<h2 id="0-Datasets-Used"><a href="#0-Datasets-Used" class="headerlink" title="0. Datasets Used"></a>0. Datasets Used</h2><p>Immigration to Canada from 1980 to 2013. </p>
<p>See: <a href="https://www.un.org/en/development/desa/population/migration/data/empirical2/migrationflows.asp" target="_blank" rel="noopener">https://www.un.org/en/development/desa/population/migration/data/empirical2/migrationflows.asp</a></p>
<h2 id="1-Pandas-Basic"><a href="#1-Pandas-Basic" class="headerlink" title="1. Pandas Basic"></a>1. Pandas Basic</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  import two key data analysis modules</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np  <span class="comment"># useful for many scientific computing in Python</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd <span class="comment"># primary data structure library</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">!conda install -c anaconda xlrd --yes</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">df_can = pd.read_excel(<span class="string">'https://s3-api.us-geo.objectstorage.softlayer.net/cf-courses-data/CognitiveClass/DV0101EN/labs/Data_Files/Canada.xlsx'</span>,</span><br><span class="line">                       sheet_name=<span class="string">'Canada by Citizenship'</span>,</span><br><span class="line">                       skiprows=range(<span class="number">20</span>),</span><br><span class="line">                       skipfooter=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> (<span class="string">'Data read into a pandas dataframe!'</span>)</span><br><span class="line"></span><br><span class="line">df_can.head() <span class="comment"># view the top 5 rows of the dataset</span></span><br><span class="line">df_can.head(<span class="number">10</span>) <span class="comment"># view the top 10 rows of the dataset</span></span><br><span class="line">df_can.tail() <span class="comment"># veiw the bottom 5 rows of the dataset </span></span><br><span class="line">df_can.info() <span class="comment"># get basic information </span></span><br><span class="line">df_can.columns.values <span class="comment"># get the list of column headers</span></span><br><span class="line">df_can.index.values <span class="comment"># get the list of indicies</span></span><br><span class="line">df_can.shape <span class="comment"># size of dataframe (rows, columns)</span></span><br><span class="line">df_can.drop([<span class="string">'AREA'</span>,<span class="string">'Coverage'</span>], axis=<span class="number">1</span>, inplace=<span class="literal">True</span>)<span class="comment"># axis=0-&gt;rows(default);=1-&gt;columns</span></span><br><span class="line">df_can.rename(columns=&#123;<span class="string">'OdName'</span>:<span class="string">'Country'</span>, <span class="string">'RegName'</span>:<span class="string">'Region'</span>&#125;, inplace=<span class="literal">True</span>) <span class="comment"># rename the columns </span></span><br><span class="line">df_can[<span class="string">'Total'</span>] = df_can.sum(axis=<span class="number">1</span>) <span class="comment"># sums up the total immigrants by country</span></span><br><span class="line">df_can.isnull().sum() <span class="comment"># see null objects</span></span><br><span class="line">df_can.describe() <span class="comment"># view a quick summary of each column</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The default type of index and columns is NOT list.</span></span><br><span class="line">print(type(df_can.columns)) <span class="comment"># :&lt;class 'pandas.core.indexes.base.Index'&gt;</span></span><br><span class="line">print(type(df_can.index)) 	<span class="comment"># :&lt;class 'pandas.core.indexes.range.RangeIndex'&gt;</span></span><br><span class="line"><span class="comment"># To get the index and columns as lists</span></span><br><span class="line">df_can.columns.tolist()</span><br><span class="line">df_can.index.tolist()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Indexing and Selection (slicing)</span></span><br><span class="line">df_can.Country <span class="comment"># returns a series</span></span><br><span class="line">df_can[[<span class="string">'Country'</span>, <span class="number">1980</span>, <span class="number">1981</span>, <span class="number">1982</span>, <span class="number">1983</span>, <span class="number">1984</span>, <span class="number">1985</span>]] <span class="comment"># returns a dataframe</span></span><br><span class="line">df_can.set_index(<span class="string">'Country'</span>, inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 1. the full row data (all columns)</span></span><br><span class="line">print(df_can.loc[<span class="string">'Japan'</span>])</span><br><span class="line"><span class="comment">## 2. for year 2013</span></span><br><span class="line">print(df_can.loc[<span class="string">'Japan'</span>, <span class="number">2013</span>])</span><br><span class="line"><span class="comment">## 3. for years 1980 to 1985</span></span><br><span class="line">print(df_can.loc[<span class="string">'Japan'</span>, [<span class="number">1980</span>, <span class="number">1981</span>, <span class="number">1982</span>, <span class="number">1983</span>, <span class="number">1984</span>, <span class="number">1984</span>]])</span><br><span class="line">print(df_can.iloc[<span class="number">87</span>, [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]])</span><br><span class="line"><span class="comment"># convert the column names into strings</span></span><br><span class="line">df_can.columns = list(map(str, df_can.columns))</span><br></pre></td></tr></table></figure>

<h2 id="2-Matplotlib"><a href="#2-Matplotlib" class="headerlink" title="2. Matplotlib"></a>2. Matplotlib</h2><blockquote>
<p>Matplotlib is a Python 2D plotting library which produces publication quality figures in a variety of hardcopy formats and interactive environments across platforms. Matplotlib can be used in Python scripts, the Python and IPython shell, the jupyter notebook, web application servers, and four graphical user interface toolkits.</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># we are using the inline backend</span></span><br><span class="line">%matplotlib inline </span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib <span class="keyword">as</span> mpl</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">print</span> (<span class="string">'Matplotlib version: '</span>, mpl.__version__) <span class="comment"># &gt;= 2.0.0</span></span><br></pre></td></tr></table></figure>

<h3 id="2-1-Line-Plots"><a href="#2-1-Line-Plots" class="headerlink" title="2.1 Line Plots"></a>2.1 Line Plots</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">haiti = df_can.loc[<span class="string">'Haiti'</span>, years] <span class="comment"># passing in years 1980 - 2013 to exclude the 'total' column</span></span><br><span class="line">haiti.plot() <span class="comment"># plot a line plot</span></span><br><span class="line"></span><br><span class="line">haiti.index = haiti.index.map(int) <span class="comment"># change the index values of Haiti to type integer for plotting</span></span><br><span class="line">haiti.plot(kind=<span class="string">'line'</span>)</span><br><span class="line"></span><br><span class="line">plt.title(<span class="string">'Immigration from Haiti'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'Number of immigrants'</span>)</span><br><span class="line">plt.xlabel(<span class="string">'Years'</span>)</span><br><span class="line"><span class="comment"># plt.text(2000, 6000, '2010 Earthquake') # see note below</span></span><br><span class="line"></span><br><span class="line">plt.show() <span class="comment"># need this line to show the updates made to the figure</span></span><br></pre></td></tr></table></figure>

<p>Practice: Compare the trend of top 5 countries that contributed the most to immigration to Canada.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># get the top 5 entries</span></span><br><span class="line">df_top5 = df_can.head(<span class="number">5</span>)</span><br><span class="line"><span class="comment"># print(df_top5)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># transpose the dataframe</span></span><br><span class="line">df_top5 = df_top5[years].transpose() </span><br><span class="line">print(df_top5)</span><br><span class="line"></span><br><span class="line">df_top5.index = df_top5.index.map(int) <span class="comment"># let's change the index values of df_top5 to type integer for plotting</span></span><br><span class="line">df_top5.plot(kind=<span class="string">'line'</span>, figsize=(<span class="number">14</span>, <span class="number">8</span>)) <span class="comment"># pass a tuple (x, y) size</span></span><br><span class="line"></span><br><span class="line">plt.title(<span class="string">'Immigration Trend of Top 5 Countries'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'Number of Immigrants'</span>)</span><br><span class="line">plt.xlabel(<span class="string">'Years'</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">How come we didn't need to transpose Haiti's dataframe before plotting (like we did for df_CI)?</span></span><br><span class="line"><span class="string">That's because haiti is a series as opposed to a dataframe, and has the years as its indices as shown below.</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-11-30-142542.png" alt="image-20191130222541900"></p>
<h3 id="2-2-Area-Plots"><a href="#2-2-Area-Plots" class="headerlink" title="2.2 Area Plots"></a>2.2 Area Plots</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">df_top5.index = df_top5.index.map(int) <span class="comment"># let's change the index values of df_top5 to type integer for plotting</span></span><br><span class="line">df_top5.plot(kind=<span class="string">'area'</span>, stacked=<span class="literal">False</span>, figsize=(<span class="number">20</span>, <span class="number">10</span>), ) <span class="comment"># Pass a tuple (x, y) size</span></span><br><span class="line"><span class="comment"># df_top5.plot(kind='area', alpha=0.25, stacked=False, figsize=(20, 10), )</span></span><br><span class="line"> 	<span class="comment"># alpha: 0-1, default value = 0.5</span></span><br><span class="line">  </span><br><span class="line">plt.title(<span class="string">'Immigration Trend of Top 5 Countries'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'Number of Immigrants'</span>)</span><br><span class="line">plt.xlabel(<span class="string">'Years'</span>)</span><br><span class="line"></span><br><span class="line">plt.show()	</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string"># option 2: preferred option with more flexibility</span></span><br><span class="line"><span class="string">ax = df_top5.plot(kind='area', alpha=0.35, figsize=(20, 10))</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ax.set_title('Immigration Trend of Top 5 Countries')</span></span><br><span class="line"><span class="string">ax.set_ylabel('Number of Immigrants')</span></span><br><span class="line"><span class="string">ax.set_xlabel('Years')</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-12-04-063350.png" alt="image-20191204143349332"></p>
<h3 id="2-3-Histograms"><a href="#2-3-Histograms" class="headerlink" title="2.3 Histograms"></a>2.3 Histograms</h3><p>Display the immigration distribution for Greece, Albania, and Bulgaria for years 1980 - 2013 using an overlapping plot with 15 bins and a transparency value of 0.35.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># create a dataframe of the countries of interest (cof)</span></span><br><span class="line">df_cof = df_can.loc[[<span class="string">'Greece'</span>, <span class="string">'Albania'</span>, <span class="string">'Bulgaria'</span>], years]</span><br><span class="line"><span class="comment"># transpose the dataframe</span></span><br><span class="line">df_cof = df_cof.transpose() </span><br><span class="line"><span class="comment"># let's get the x-tick values</span></span><br><span class="line">count, bin_edges = np.histogram(df_cof, <span class="number">15</span>)</span><br><span class="line"><span class="comment"># Un-stacked Histogram</span></span><br><span class="line">df_cof.plot(kind =<span class="string">'hist'</span>,</span><br><span class="line">            figsize=(<span class="number">10</span>, <span class="number">6</span>),</span><br><span class="line">            bins=<span class="number">15</span>,</span><br><span class="line">            alpha=<span class="number">0.35</span>,</span><br><span class="line">            xticks=bin_edges,</span><br><span class="line">            color=[<span class="string">'coral'</span>, <span class="string">'darkslateblue'</span>, <span class="string">'mediumseagreen'</span>]</span><br><span class="line">            )</span><br><span class="line">plt.title(<span class="string">'Histogram of Immigration from Greece, Albania, and Bulgaria from 1980 - 2013'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'Number of Years'</span>)</span><br><span class="line">plt.xlabel(<span class="string">'Number of Immigrants'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-12-04-063428.png" alt="image-20191204143427790"></p>
<h3 id="2-4-Dar-Charts"><a href="#2-4-Dar-Charts" class="headerlink" title="2.4 Dar Charts"></a>2.4 Dar Charts</h3><p>Using the scripting layter and the <code>df_can</code> dataset, create a <em>horizontal</em> bar plot showing the <em>total</em> number of immigrants to Canada from the top 15 countries, for the period 1980 - 2013. Label each country with the total immigrant count.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># sort dataframe on 'Total' column (descending)</span></span><br><span class="line">df_can.sort_values(by=<span class="string">'Total'</span>, ascending=<span class="literal">True</span>, inplace=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># get top 15 countries</span></span><br><span class="line">df_top15 = df_can[<span class="string">'Total'</span>].tail(<span class="number">15</span>)</span><br><span class="line">df_top15</span><br><span class="line"><span class="comment"># generate plot</span></span><br><span class="line">df_top15.plot(kind=<span class="string">'barh'</span>, figsize=(<span class="number">12</span>, <span class="number">12</span>), color=<span class="string">'steelblue'</span>)</span><br><span class="line">plt.xlabel(<span class="string">'Number of Immigrants'</span>)</span><br><span class="line">plt.title(<span class="string">'Top 15 Conuntries Contributing to the Immigration to Canada between 1980 - 2013'</span>)</span><br><span class="line"><span class="comment"># annotate value labels to each country</span></span><br><span class="line"><span class="keyword">for</span> index, value <span class="keyword">in</span> enumerate(df_top15): </span><br><span class="line">    label = format(int(value), <span class="string">','</span>) <span class="comment"># format int with commas</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># place text at the end of bar (subtracting 47000 from x, and 0.1 from y to make it fit within the bar)</span></span><br><span class="line">    plt.annotate(label, xy=(value - <span class="number">47000</span>, index - <span class="number">0.10</span>), color=<span class="string">'white'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-12-04-063525.png" alt="image-20191204143524730"></p>
<h3 id="2-5-Pie-Charts"><a href="#2-5-Pie-Charts" class="headerlink" title="2.5 Pie Charts"></a>2.5 Pie Charts</h3><p>Using a pie chart, explore the proportion (percentage) of new immigrants grouped by continents in the year 2013.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">explode_list = [<span class="number">0.1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>, <span class="number">0.2</span>] <span class="comment"># ratio for each continent with which to offset each wedge.</span></span><br><span class="line">df_continents[<span class="string">'2013'</span>].plot(kind=<span class="string">'pie'</span>,</span><br><span class="line">                            figsize=(<span class="number">15</span>, <span class="number">6</span>),</span><br><span class="line">                            autopct=<span class="string">'%1.1f%%'</span>, </span><br><span class="line">                            startangle=<span class="number">90</span>,    </span><br><span class="line">                            shadow=<span class="literal">True</span>,       </span><br><span class="line">                            labels=<span class="literal">None</span>,                 <span class="comment"># turn off labels on pie chart</span></span><br><span class="line">                            pctdistance=<span class="number">1.12</span>,            <span class="comment"># the ratio between the pie center and start of text label</span></span><br><span class="line">                            explode=explode_list         <span class="comment"># 'explode' lowest 3 continents</span></span><br><span class="line">                            )</span><br><span class="line"><span class="comment"># scale the title up by 12% to match pctdistance</span></span><br><span class="line">plt.title(<span class="string">'Immigration to Canada by Continent in 2013'</span>, y=<span class="number">1.12</span>) </span><br><span class="line">plt.axis(<span class="string">'equal'</span>) </span><br><span class="line"><span class="comment"># add legend</span></span><br><span class="line">plt.legend(labels=df_continents.index, loc=<span class="string">'upper left'</span>) </span><br><span class="line"><span class="comment"># show plot</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<h3 id="2-6-Box-Plots"><a href="#2-6-Box-Plots" class="headerlink" title="2.6 Box Plots"></a>2.6 Box Plots</h3><p><img src="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-12-04-065232.png" alt="image-20191204145232643"></p>
<p>Compare the distribution of the number of new immigrants from India and China for the period 1980 - 2013.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">df_CI= df_can.loc[[<span class="string">'China'</span>, <span class="string">'India'</span>], years].transpose()</span><br><span class="line">df_CI.head()</span><br><span class="line"><span class="comment"># view the percentages associated with both countries</span></span><br><span class="line">df_CI.describe()</span><br><span class="line"><span class="comment"># Plot data</span></span><br><span class="line">df_CI.plot(kind=<span class="string">'box'</span>, figsize=(<span class="number">10</span>, <span class="number">7</span>), color=<span class="string">'blue'</span>, vert=<span class="literal">True</span>)</span><br><span class="line">plt.title(<span class="string">'Box plots of Immigrants from China and India (1980 - 2013)'</span>)</span><br><span class="line">plt.xlabel(<span class="string">'Number of Immigrants'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<h3 id="2-7-Scatter-Plots"><a href="#2-7-Scatter-Plots" class="headerlink" title="2.7 Scatter Plots"></a>2.7 Scatter Plots</h3><p>Create a scatter plot of the total immigration from Denmark, Norway, and Sweden to Canada from 1980 to 2013</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># create df_countries dataframe</span></span><br><span class="line">df_countries = df_can.loc[[<span class="string">'Denmark'</span>, <span class="string">'Norway'</span>, <span class="string">'Sweden'</span>], years].transpose()</span><br><span class="line"><span class="comment"># create df_total by summing across three countries for each year</span></span><br><span class="line">df_total = pd.DataFrame(df_countries.sum(axis=<span class="number">1</span>))</span><br><span class="line"><span class="comment"># reset index in place</span></span><br><span class="line">df_total.reset_index(inplace=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># rename columns</span></span><br><span class="line">df_total.columns = [<span class="string">'year'</span>, <span class="string">'total'</span>]</span><br><span class="line"><span class="comment"># change column year from string to int to create scatter plot</span></span><br><span class="line">df_total[<span class="string">'year'</span>] = df_total[<span class="string">'year'</span>].astype(int)</span><br><span class="line"><span class="comment"># show resulting dataframe</span></span><br><span class="line">df_total.head()</span><br><span class="line"><span class="comment"># generate scatter plot</span></span><br><span class="line">df_total.plot(kind=<span class="string">'scatter'</span>, x=<span class="string">'year'</span>, y=<span class="string">'total'</span>, figsize=(<span class="number">3</span>, <span class="number">2</span>), color=<span class="string">'darkblue'</span>)</span><br><span class="line"><span class="comment"># add title and label to axes</span></span><br><span class="line">plt.title(<span class="string">'Immigration from Denmark, Norway, and Sweden to Canada from 1980 - 2013'</span>)</span><br><span class="line">plt.xlabel(<span class="string">'Year'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'Number of Immigrants'</span>)</span><br><span class="line"><span class="comment"># show plot</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-12-04-071843.png" alt="image-20191204151843324"></p>
<h3 id="2-8-Bubble-Plots"><a href="#2-8-Bubble-Plots" class="headerlink" title="2.8 Bubble Plots"></a>2.8 Bubble Plots</h3><p>Create bubble plots of immigration from China and India to visualize any differences with time from 1980 to 2013.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">df_can_t = df_can[years].transpose() <span class="comment"># transposed dataframe</span></span><br><span class="line"><span class="comment"># cast the Years (the index) to type int</span></span><br><span class="line">df_can_t.index = map(int, df_can_t.index)</span><br><span class="line"><span class="comment"># let's label the index. This will automatically be the column name when we reset the index</span></span><br><span class="line">df_can_t.index.name = <span class="string">'Year'</span></span><br><span class="line"><span class="comment"># reset index to bring the Year in as a column</span></span><br><span class="line">df_can_t.reset_index(inplace=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># view the changes</span></span><br><span class="line">df_can_t.head()</span><br><span class="line"></span><br><span class="line"><span class="comment"># normalize China data</span></span><br><span class="line">norm_china = (df_can_t[<span class="string">'China'</span>] - df_can_t[<span class="string">'China'</span>].min()) / (df_can_t[<span class="string">'China'</span>].max() - df_can_t[<span class="string">'China'</span>].min())</span><br><span class="line"><span class="comment"># normalize India data</span></span><br><span class="line">norm_india = (df_can_t[<span class="string">'India'</span>] - df_can_t[<span class="string">'India'</span>].min()) / (df_can_t[<span class="string">'India'</span>].max() - df_can_t[<span class="string">'India'</span>].min())</span><br><span class="line"><span class="comment"># China</span></span><br><span class="line">ax0 = df_can_t.plot(kind=<span class="string">'scatter'</span>,</span><br><span class="line">                    x=<span class="string">'Year'</span>,</span><br><span class="line">                    y=<span class="string">'China'</span>,</span><br><span class="line">                    figsize=(<span class="number">14</span>, <span class="number">8</span>),</span><br><span class="line">                    alpha=<span class="number">0.5</span>,                  <span class="comment"># transparency</span></span><br><span class="line">                    color=<span class="string">'green'</span>,</span><br><span class="line">                    s=norm_china * <span class="number">2000</span> + <span class="number">10</span>,  <span class="comment"># pass in weights </span></span><br><span class="line">                    xlim=(<span class="number">1975</span>, <span class="number">2015</span>)</span><br><span class="line">                   )</span><br><span class="line"><span class="comment"># India</span></span><br><span class="line">ax1 = df_can_t.plot(kind=<span class="string">'scatter'</span>,</span><br><span class="line">                    x=<span class="string">'Year'</span>,</span><br><span class="line">                    y=<span class="string">'India'</span>,</span><br><span class="line">                    alpha=<span class="number">0.5</span>,</span><br><span class="line">                    color=<span class="string">"blue"</span>,</span><br><span class="line">                    s=norm_india * <span class="number">2000</span> + <span class="number">10</span>,</span><br><span class="line">                    ax = ax0</span><br><span class="line">                   )</span><br><span class="line"></span><br><span class="line">ax0.set_ylabel(<span class="string">'Number of Immigrants'</span>)</span><br><span class="line">ax0.set_title(<span class="string">'Immigration from China and India from 1980 - 2013'</span>)</span><br><span class="line">ax0.legend([<span class="string">'China'</span>, <span class="string">'India'</span>], loc=<span class="string">'upper left'</span>, fontsize=<span class="string">'x-large'</span>)</span><br></pre></td></tr></table></figure>

<p><img src="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-12-04-072236.png" alt="image-20191204152236399"></p>
<h3 id="2-9-Waffle-Charts"><a href="#2-9-Waffle-Charts" class="headerlink" title="2.9 Waffle Charts"></a>2.9 Waffle Charts</h3><p>A <code>waffle chart</code> is an interesting visualization that is normally created to display progress toward goals. It is commonly an effective option when you are trying to add interesting visualization features to a visual that consists mainly of cells, such as an Excel dashboard.</p>
<p>This <em>create_waffle_chart</em> function would take the following parameters as input:</p>
<blockquote>
<p><strong>categories</strong>: Unique categories or classes in dataframe.</p>
<p><strong>values</strong>: Values corresponding to categories or classes.</p>
<p><strong>height</strong>: Defined height of waffle chart.</p>
<p><strong>width</strong>: Defined width of waffle chart.</p>
<p><strong>colormap</strong>: Colormap class</p>
<p><strong>value_sign</strong>: In order to make our function more generalizable, we will add this parameter to address signs that could be associated with a value such as %, $, and so on. <strong>value_sign</strong> has a default value of empty string.</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create_waffle_chart</span><span class="params">(categories, values, height, width, colormap, value_sign=<span class="string">''</span>)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># compute the proportion of each category with respect to the total</span></span><br><span class="line">    total_values = sum(values)</span><br><span class="line">    category_proportions = [(float(value) / total_values) <span class="keyword">for</span> value <span class="keyword">in</span> values]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># compute the total number of tiles</span></span><br><span class="line">    total_num_tiles = width * height <span class="comment"># total number of tiles</span></span><br><span class="line">    <span class="keyword">print</span> (<span class="string">'Total number of tiles is'</span>, total_num_tiles)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># compute the number of tiles for each catagory</span></span><br><span class="line">    tiles_per_category = [round(proportion * total_num_tiles) <span class="keyword">for</span> proportion <span class="keyword">in</span> category_proportions]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># print out number of tiles per category</span></span><br><span class="line">    <span class="keyword">for</span> i, tiles <span class="keyword">in</span> enumerate(tiles_per_category):</span><br><span class="line">        <span class="keyword">print</span> (df_dsn.index.values[i] + <span class="string">': '</span> + str(tiles))</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># initialize the waffle chart as an empty matrix</span></span><br><span class="line">    waffle_chart = np.zeros((height, width))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># define indices to loop through waffle chart</span></span><br><span class="line">    category_index = <span class="number">0</span></span><br><span class="line">    tile_index = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># populate the waffle chart</span></span><br><span class="line">    <span class="keyword">for</span> col <span class="keyword">in</span> range(width):</span><br><span class="line">        <span class="keyword">for</span> row <span class="keyword">in</span> range(height):</span><br><span class="line">            tile_index += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># if the number of tiles populated for the current category </span></span><br><span class="line">            <span class="comment"># is equal to its corresponding allocated tiles...</span></span><br><span class="line">            <span class="keyword">if</span> tile_index &gt; sum(tiles_per_category[<span class="number">0</span>:category_index]):</span><br><span class="line">                <span class="comment"># ...proceed to the next category</span></span><br><span class="line">                category_index += <span class="number">1</span>       </span><br><span class="line">            </span><br><span class="line">            <span class="comment"># set the class value to an integer, which increases with class</span></span><br><span class="line">            waffle_chart[row, col] = category_index</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># instantiate a new figure object</span></span><br><span class="line">    fig = plt.figure()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># use matshow to display the waffle chart</span></span><br><span class="line">    colormap = plt.cm.coolwarm</span><br><span class="line">    plt.matshow(waffle_chart, cmap=colormap)</span><br><span class="line">    plt.colorbar()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># get the axis</span></span><br><span class="line">    ax = plt.gca()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># set minor ticks</span></span><br><span class="line">    ax.set_xticks(np.arange(<span class="number">-.5</span>, (width), <span class="number">1</span>), minor=<span class="literal">True</span>)</span><br><span class="line">    ax.set_yticks(np.arange(<span class="number">-.5</span>, (height), <span class="number">1</span>), minor=<span class="literal">True</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># add dridlines based on minor ticks</span></span><br><span class="line">    ax.grid(which=<span class="string">'minor'</span>, color=<span class="string">'w'</span>, linestyle=<span class="string">'-'</span>, linewidth=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    plt.xticks([])</span><br><span class="line">    plt.yticks([])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># compute cumulative sum of individual categories to match color schemes between chart and legend</span></span><br><span class="line">    values_cumsum = np.cumsum(values)</span><br><span class="line">    total_values = values_cumsum[len(values_cumsum) - <span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># create legend</span></span><br><span class="line">    legend_handles = []</span><br><span class="line">    <span class="keyword">for</span> i, category <span class="keyword">in</span> enumerate(categories):</span><br><span class="line">        <span class="keyword">if</span> value_sign == <span class="string">'%'</span>:</span><br><span class="line">            label_str = category + <span class="string">' ('</span> + str(values[i]) + value_sign + <span class="string">')'</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            label_str = category + <span class="string">' ('</span> + value_sign + str(values[i]) + <span class="string">')'</span></span><br><span class="line">            </span><br><span class="line">        color_val = colormap(float(values_cumsum[i])/total_values)</span><br><span class="line">        legend_handles.append(mpatches.Patch(color=color_val, label=label_str))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># add legend to chart</span></span><br><span class="line">    plt.legend(</span><br><span class="line">        handles=legend_handles,</span><br><span class="line">        loc=<span class="string">'lower center'</span>, </span><br><span class="line">        ncol=len(categories),</span><br><span class="line">        bbox_to_anchor=(<span class="number">0.</span>, <span class="number">-0.2</span>, <span class="number">0.95</span>, <span class="number">.1</span>)</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">width = <span class="number">40</span> <span class="comment"># width of chart</span></span><br><span class="line">height = <span class="number">10</span> <span class="comment"># height of chart</span></span><br><span class="line">categories = df_dsn.index.values <span class="comment"># categories</span></span><br><span class="line">values = df_dsn[<span class="string">'Total'</span>] <span class="comment"># correponding values of categories</span></span><br><span class="line">colormap = plt.cm.coolwarm <span class="comment"># color map class</span></span><br><span class="line"></span><br><span class="line">create_waffle_chart(categories, values, height, width, colormap)</span><br></pre></td></tr></table></figure>

<p><img src="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-12-04-073601.png" alt="image-20191204153600860"></p>
<h3 id="2-10-Word-Clouds"><a href="#2-10-Word-Clouds" class="headerlink" title="2.10 Word Clouds"></a>2.10 Word Clouds</h3><p><code>Word</code> clouds (also known as text clouds or tag clouds) work in a simple way: the more a specific word appears in a source of textual data (such as a speech, blog post, or database), the bigger and bolder it appears in the word cloud.</p>
<p>Generate a word cloud for a given text document</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># install wordcloud</span></span><br><span class="line">!conda install -c conda-forge wordcloud==<span class="number">1.4</span><span class="number">.1</span> --yes</span><br><span class="line"><span class="comment"># import package and its set of stopwords</span></span><br><span class="line"><span class="keyword">from</span> wordcloud <span class="keyword">import</span> WordCloud, STOPWORDS</span><br><span class="line"></span><br><span class="line"><span class="comment"># download file and save as alice_novel.txt</span></span><br><span class="line">!wget --quiet https://s3-api.us-geo.objectstorage.softlayer.net/cf-courses-data/CognitiveClass/DV0101EN/labs/Data_Files/alice_novel.txt</span><br><span class="line"><span class="comment"># open the file and read it into a variable alice_novel</span></span><br><span class="line">alice_novel = open(<span class="string">'alice_novel.txt'</span>, <span class="string">'r'</span>).read()</span><br><span class="line"><span class="keyword">print</span> (<span class="string">'File downloaded and saved!'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># remove any redundant stopwords</span></span><br><span class="line">stopwords = set(STOPWORDS)</span><br><span class="line"></span><br><span class="line"><span class="comment"># instantiate a word cloud object</span></span><br><span class="line">alice_wc = WordCloud(</span><br><span class="line">    background_color=<span class="string">'white'</span>,</span><br><span class="line">    max_words=<span class="number">2000</span>,</span><br><span class="line">    stopwords=stopwords</span><br><span class="line">)</span><br><span class="line"><span class="comment"># add the words said to stopwords</span></span><br><span class="line">stopwords.add(<span class="string">'said'</span>) </span><br><span class="line"></span><br><span class="line"><span class="comment"># generate the word cloud</span></span><br><span class="line">alice_wc.generate(alice_novel)</span><br><span class="line"></span><br><span class="line"><span class="comment"># resize the cloud so that we can see the less frequent words a little better</span></span><br><span class="line">fig = plt.figure()</span><br><span class="line">fig.set_figwidth(<span class="number">14</span>) <span class="comment"># set width</span></span><br><span class="line">fig.set_figheight(<span class="number">18</span>) <span class="comment"># set height</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># display the cloud</span></span><br><span class="line">plt.imshow(alice_wc, interpolation=<span class="string">'bilinear'</span>)</span><br><span class="line">plt.axis(<span class="string">'off'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p>Shaping the <code>word</code> cloud according to the mask is straightforward using <code>word_cloud</code> package. For simplicity, we will continue using the first 2000 words in the novel.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># download image</span></span><br><span class="line">!wget --quiet https://s3-api.us-geo.objectstorage.softlayer.net/cf-courses-data/CognitiveClass/DV0101EN/labs/Images/alice_mask.png</span><br><span class="line"><span class="comment"># save mask to alice_mask</span></span><br><span class="line">alice_mask = np.array(Image.open(<span class="string">'alice_mask.png'</span>))</span><br><span class="line">print(<span class="string">'Image downloaded and saved!'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># take a look at how the mask looks like</span></span><br><span class="line">fig = plt.figure()</span><br><span class="line">fig.set_figwidth(<span class="number">14</span>) <span class="comment"># set width</span></span><br><span class="line">fig.set_figheight(<span class="number">18</span>) <span class="comment"># set height</span></span><br><span class="line"></span><br><span class="line">plt.imshow(alice_mask, cmap=plt.cm.gray, interpolation=<span class="string">'bilinear'</span>)</span><br><span class="line">plt.axis(<span class="string">'off'</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># instantiate a word cloud object</span></span><br><span class="line">alice_wc = WordCloud(background_color=<span class="string">'white'</span>, max_words=<span class="number">2000</span>, mask=alice_mask, stopwords=stopwords)</span><br><span class="line"></span><br><span class="line"><span class="comment"># generate the word cloud</span></span><br><span class="line">alice_wc.generate(alice_novel)</span><br><span class="line"></span><br><span class="line"><span class="comment"># display the word cloud</span></span><br><span class="line">fig = plt.figure()</span><br><span class="line">fig.set_figwidth(<span class="number">14</span>) <span class="comment"># set width</span></span><br><span class="line">fig.set_figheight(<span class="number">18</span>) <span class="comment"># set height</span></span><br><span class="line"></span><br><span class="line">plt.imshow(alice_wc, interpolation=<span class="string">'bilinear'</span>)</span><br><span class="line">plt.axis(<span class="string">'off'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-12-04-075236.png" alt="image-20191204155236461"></p>
<h3 id="2-11-Regression-Plots"><a href="#2-11-Regression-Plots" class="headerlink" title="2.11 Regression Plots"></a>2.11 Regression Plots</h3><p>Use seaborn to create a scatter plot with a regression line to visualize the total immigration from Denmark, Sweden, and Norway to Canada from 1980 to 2013.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># create df_countries dataframe</span></span><br><span class="line">df_countries = df_can.loc[[<span class="string">'Denmark'</span>, <span class="string">'Norway'</span>, <span class="string">'Sweden'</span>], years].transpose()</span><br><span class="line"><span class="comment"># create df_total by summing across three countries for each year</span></span><br><span class="line">df_total = pd.DataFrame(df_countries.sum(axis=<span class="number">1</span>))</span><br><span class="line"><span class="comment"># reset index in place</span></span><br><span class="line">df_total.reset_index(inplace=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># rename columns</span></span><br><span class="line">df_total.columns = [<span class="string">'year'</span>, <span class="string">'total'</span>]</span><br><span class="line"><span class="comment"># change column year from string to int to create scatter plot</span></span><br><span class="line">df_total[<span class="string">'year'</span>] = df_total[<span class="string">'year'</span>].astype(int)</span><br><span class="line"><span class="comment"># define figure size</span></span><br><span class="line">plt.figure(figsize=(<span class="number">15</span>, <span class="number">10</span>))</span><br><span class="line"><span class="comment"># define background style and font size</span></span><br><span class="line">sns.set(font_scale=<span class="number">1.5</span>)</span><br><span class="line">sns.set_style(<span class="string">'whitegrid'</span>)</span><br><span class="line"><span class="comment"># generate plot and add title and axes labels</span></span><br><span class="line">ax = sns.regplot(x=<span class="string">'year'</span>, y=<span class="string">'total'</span>, data=df_total, color=<span class="string">'green'</span>, marker=<span class="string">'+'</span>, scatter_kws=&#123;<span class="string">'s'</span>: <span class="number">200</span>&#125;)</span><br><span class="line">ax.set(xlabel=<span class="string">'Year'</span>, ylabel=<span class="string">'Total Immigration'</span>)</span><br><span class="line">ax.set_title(<span class="string">'Total Immigrationn from Denmark, Sweden, and Norway to Canada from 1980 - 2013'</span>)</span><br></pre></td></tr></table></figure>

<p><img src="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-12-04-080530.png" alt="image-20191204160529566"></p>
<h2 id="3-Generating-Maps"><a href="#3-Generating-Maps" class="headerlink" title="3. Generating Maps"></a>3. Generating Maps</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np  <span class="comment"># useful for many scientific computing in Python</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd <span class="comment"># primary data structure library</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Folium is a powerful Python library that helps you create several types of Leaflet maps. </span></span><br><span class="line"><span class="comment"># The fact that the Folium results are interactive makes this library very useful for dashboard building.</span></span><br><span class="line">!conda install -c conda-forge folium=<span class="number">0.5</span><span class="number">.0</span> --yes</span><br><span class="line"><span class="keyword">import</span> folium</span><br><span class="line">print(<span class="string">'Folium installed and imported!'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># define the world map</span></span><br><span class="line">world_map = folium.Map()</span><br><span class="line"><span class="comment"># define the world map centered around Canada with a low / high zoom level</span></span><br><span class="line"><span class="comment"># world_map = folium.Map(location=[56.130, -106.35], zoom_start=4)</span></span><br><span class="line">world_map = folium.Map(location=[<span class="number">56.130</span>, <span class="number">-106.35</span>], zoom_start=<span class="number">8</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># create a Stamen Toner / Stamen Terrain / Mapbox Bright map of the world centered around Canada</span></span><br><span class="line"><span class="comment"># world_map = folium.Map(location=[56.130, -106.35], zoom_start=4, tiles='Stamen Toner')</span></span><br><span class="line"><span class="comment"># world_map = folium.Map(location=[56.130, -106.35], zoom_start=4, tiles='Stamen Terrain')</span></span><br><span class="line">world_map = folium.Map(tiles=<span class="string">'Mapbox Bright'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># display map</span></span><br><span class="line">world_map</span><br></pre></td></tr></table></figure>

<h3 id="Maps-with-Markers"><a href="#Maps-with-Markers" class="headerlink" title="Maps with Markers"></a>Maps with Markers</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np  <span class="comment"># useful for many scientific computing in Python</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd <span class="comment"># primary data structure library</span></span><br><span class="line"><span class="keyword">from</span> folium <span class="keyword">import</span> plugins</span><br><span class="line"></span><br><span class="line">df_incidents = pd.read_csv(<span class="string">'https://s3-api.us-geo.objectstorage.softlayer.net/cf-courses-data/CognitiveClass/DV0101EN/labs/Data_Files/Police_Department_Incidents_-_Previous_Year__2016_.csv'</span>)</span><br><span class="line">print(<span class="string">'Dataset downloaded and read into a pandas dataframe!'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># let's start again with a clean copy of the map of San Francisco</span></span><br><span class="line">sanfran_map = folium.Map(location = [latitude, longitude], zoom_start = <span class="number">12</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># get the first 100 crimes in the df_incidents dataframe</span></span><br><span class="line">limit = <span class="number">100</span></span><br><span class="line">df_incidents = df_incidents.iloc[<span class="number">0</span>:limit, :]</span><br><span class="line"><span class="comment"># San Francisco latitude and longitude values</span></span><br><span class="line">latitude = <span class="number">37.77</span></span><br><span class="line">longitude = <span class="number">-122.42</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># instantiate a mark cluster object for the incidents in the dataframe</span></span><br><span class="line">incidents = plugins.MarkerCluster().add_to(sanfran_map)</span><br><span class="line"></span><br><span class="line"><span class="comment"># loop through the dataframe and add each data point to the mark cluster</span></span><br><span class="line"><span class="keyword">for</span> lat, lng, label, <span class="keyword">in</span> zip(df_incidents.Y, df_incidents.X, df_incidents.Category):</span><br><span class="line">    folium.Marker(</span><br><span class="line">        location=[lat, lng],</span><br><span class="line">        icon=<span class="literal">None</span>,</span><br><span class="line">        popup=label,</span><br><span class="line">    ).add_to(incidents)</span><br><span class="line"></span><br><span class="line"><span class="comment"># display map</span></span><br><span class="line">sanfran_map</span><br></pre></td></tr></table></figure>

<p><img src="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-12-04-083404.png" alt="image-20191204163404399"></p>
<h3 id="Choropleth-Map"><a href="#Choropleth-Map" class="headerlink" title="Choropleth Map"></a>Choropleth Map</h3><p>A <code>Choropleth</code> map is a thematic map in which areas are shaded or patterned in proportion to the measurement of the statistical variable being displayed on the map, such as population density or per-capita income. The choropleth map provides an easy way to visualize how a measurement varies across a geographic area or it shows the level of variability within a region. </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">df_can = pd.read_excel(<span class="string">'https://s3-api.us-geo.objectstorage.softlayer.net/cf-courses-data/CognitiveClass/DV0101EN/labs/Data_Files/Canada.xlsx'</span>,</span><br><span class="line">                     sheet_name=<span class="string">'Canada by Citizenship'</span>,</span><br><span class="line">                     skiprows=range(<span class="number">20</span>),</span><br><span class="line">                     skipfooter=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">'Data downloaded and read into a dataframe!'</span>)</span><br><span class="line"></span><br><span class="line">!conda install -c anaconda xlrd --yes</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># clean up the dataset to remove unnecessary columns (eg. REG) </span></span><br><span class="line">df_can.drop([<span class="string">'AREA'</span>,<span class="string">'REG'</span>,<span class="string">'DEV'</span>,<span class="string">'Type'</span>,<span class="string">'Coverage'</span>], axis=<span class="number">1</span>, inplace=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># let's rename the columns so that they make sense</span></span><br><span class="line">df_can.rename(columns=&#123;<span class="string">'OdName'</span>:<span class="string">'Country'</span>, <span class="string">'AreaName'</span>:<span class="string">'Continent'</span>,<span class="string">'RegName'</span>:<span class="string">'Region'</span>&#125;, inplace=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># for sake of consistency, let's also make all column labels of type string</span></span><br><span class="line">df_can.columns = list(map(str, df_can.columns))</span><br><span class="line"><span class="comment"># add total column</span></span><br><span class="line">df_can[<span class="string">'Total'</span>] = df_can.sum(axis=<span class="number">1</span>)</span><br><span class="line"><span class="comment"># years that we will be using in this lesson - useful for plotting later on</span></span><br><span class="line">years = list(map(str, range(<span class="number">1980</span>, <span class="number">2014</span>)))</span><br><span class="line"><span class="keyword">print</span> (<span class="string">'data dimensions:'</span>, df_can.shape)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># download countries geojson file</span></span><br><span class="line">!wget --quiet https://s3-api.us-geo.objectstorage.softlayer.net/cf-courses-data/CognitiveClass/DV0101EN/labs/Data_Files/world_countries.json -O world_countries.json</span><br><span class="line">print(<span class="string">'GeoJSON file downloaded!'</span>)</span><br><span class="line"></span><br><span class="line">world_geo = <span class="string">r'world_countries.json'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># create a numpy array of length 6 and has linear spacing from the minium total immigration to the maximum total immigration</span></span><br><span class="line">threshold_scale = np.linspace(df_can[<span class="string">'Total'</span>].min(),</span><br><span class="line">                              df_can[<span class="string">'Total'</span>].max(),</span><br><span class="line">                              <span class="number">6</span>, dtype=int)</span><br><span class="line">threshold_scale = threshold_scale.tolist() <span class="comment"># change the numpy array to a list</span></span><br><span class="line">threshold_scale[<span class="number">-1</span>] = threshold_scale[<span class="number">-1</span>] + <span class="number">1</span> <span class="comment"># make sure that the last value of the list is greater than the maximum immigration</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># let Folium determine the scale.</span></span><br><span class="line">world_map = folium.Map(location=[<span class="number">0</span>, <span class="number">0</span>], zoom_start=<span class="number">2</span>, tiles=<span class="string">'Mapbox Bright'</span>)</span><br><span class="line">world_map.choropleth(</span><br><span class="line">    geo_data=world_geo,</span><br><span class="line">    data=df_can,</span><br><span class="line">    columns=[<span class="string">'Country'</span>, <span class="string">'Total'</span>],</span><br><span class="line">    key_on=<span class="string">'feature.properties.name'</span>,</span><br><span class="line">    threshold_scale=threshold_scale,</span><br><span class="line">    fill_color=<span class="string">'YlOrRd'</span>, </span><br><span class="line">    fill_opacity=<span class="number">0.7</span>, </span><br><span class="line">    line_opacity=<span class="number">0.2</span>,</span><br><span class="line">    legend_name=<span class="string">'Immigration to Canada'</span>,</span><br><span class="line">    reset=<span class="literal">True</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># display map</span></span><br><span class="line">world_map</span><br></pre></td></tr></table></figure>

<p><img src="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-12-04-083904.png" alt="image-20191204163904061"></p>
<h2 id="4-Assignment"><a href="#4-Assignment" class="headerlink" title="4. Assignment"></a>4. Assignment</h2><p>A survey was conducted to gauge an audience interest in different data science topics, namely:</p>
<ol>
<li>Big Data (Spark / Hadoop)</li>
<li>Data Analysis / Statistics</li>
<li>Data Journalism</li>
<li>Data Visualization</li>
<li>Deep Learning</li>
<li>Machine Learning</li>
</ol>
<p>The participants had three options for each topic: <strong>Very</strong> <strong>Interested</strong>, <strong>Somewhat interested</strong>, and <strong>Not interested</strong>. <strong>2,233</strong>respondents completed the survey.</p>
<p>The survey results have been saved in a csv file and can be accessed through this link: <a href="https://cocl.us/datascience_survey_data" target="_blank" rel="noopener">https://cocl.us/datascience_survey_data</a>.</p>
<ul>
<li>Q1</li>
</ul>
<p>Use the <em>pandas</em> <strong>read_csv</strong> method to read the csv file into a <em>pandas</em> dataframe. One way to do that is to use the <em>index_col</em> parameter in order to load the first column as the index of the dataframe. Here is the documentation on the <em>pandas</em> <strong>read_csv</strong> method: <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html" target="_blank" rel="noopener">https://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">df = pd.read_csv(<span class="string">'https://cocl.us/datascience_survey_data'</span>,index_col = <span class="number">0</span>)</span><br><span class="line"><span class="keyword">print</span> (<span class="string">'Data read into a pandas dataframe!'</span>)</span><br><span class="line">df.head()</span><br><span class="line"><span class="comment"># df.shape</span></span><br><span class="line"><span class="comment"># df.info()</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-12-04-085254.png" alt="image-20191204165253351"></p>
<ul>
<li>Q2</li>
</ul>
<p>Use the artist layer of Matplotlib to replicate the bar chart below to visualize the <strong>percentage</strong> of the respondents’ interest in the different data science topics surveyed.</p>
<blockquote>
<p>To create this bar chart, you can follow the following steps:</p>
<ol>
<li>Sort the dataframe in descending order of <strong>Very interested.</strong></li>
<li>Convert the numbers into percentages of the total number of respondents. Recall that <strong>2,233</strong> respondents completed the survey. Round percentages to 2 decimal places.</li>
<li>As for the chart:</li>
</ol>
<ul>
<li>use a figure size of (20, 8),</li>
<li>bar width of 0.8,</li>
<li>use color #5cb85c for the <strong>Very interested</strong> bars, color #5bc0de for the <strong>Somewhat interested</strong> bars, and color #d9534f for the <strong>Not interested</strong> bars,</li>
<li>use font size 14 for the bar labels, percentages, and legend,</li>
<li>use font size 16 for the title, and,</li>
<li>display the percentages above the bars as shown above, and remove the left, top, and right borders.</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># use the inline backend to generate the plots within the browser</span></span><br><span class="line">%matplotlib inline </span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib <span class="keyword">as</span> mpl</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">mpl.style.use(<span class="string">'ggplot'</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Sorting the values</span></span><br><span class="line">df_sr.sort_values([<span class="string">'Very interested'</span>], ascending=<span class="literal">False</span>, axis=<span class="number">0</span>, inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Taking the percentage of the responses and rounding it to 2 decimal places </span></span><br><span class="line">df_sr = round((df_sr/<span class="number">2233</span>)*<span class="number">100</span>,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># View top 5 rows of the data </span></span><br><span class="line">df_sr.head()</span><br></pre></td></tr></table></figure>

<p><img src="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-12-04-090828.png" alt="image-20191204170827475"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Plotting</span></span><br><span class="line">ax = df_sr.plot(kind=<span class="string">'bar'</span>, </span><br><span class="line">                figsize=(<span class="number">20</span>, <span class="number">8</span>),</span><br><span class="line">                rot=<span class="number">90</span>,color = [<span class="string">'#5cb85c'</span>,<span class="string">'#5bc0de'</span>,<span class="string">'#d9534f'</span>],</span><br><span class="line">                width=<span class="number">.8</span>,fontsize=<span class="number">14</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Setting plot title</span></span><br><span class="line">ax.set_title(<span class="string">'Percentage of Respondents Interest in Data Science Areas'</span>,fontsize=<span class="number">16</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Setting figure background color</span></span><br><span class="line">ax.set_facecolor(<span class="string">'white'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># setting legend font size</span></span><br><span class="line">ax.legend(fontsize=<span class="number">14</span>,facecolor = <span class="string">'white'</span>) </span><br><span class="line"></span><br><span class="line"><span class="comment"># Removing the Border </span></span><br><span class="line">ax.get_yaxis().set_visible(<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Creating a function to display the percentage.</span></span><br><span class="line"><span class="keyword">for</span> p <span class="keyword">in</span> ax.patches:</span><br><span class="line">    ax.annotate(np.round(p.get_height(),decimals=<span class="number">2</span>), </span><br><span class="line">                (p.get_x()+p.get_width()/<span class="number">2.</span>, p.get_height()), </span><br><span class="line">                ha=<span class="string">'center'</span>, </span><br><span class="line">                va=<span class="string">'center'</span>, </span><br><span class="line">                xytext=(<span class="number">0</span>, <span class="number">10</span>), </span><br><span class="line">                textcoords=<span class="string">'offset points'</span>,</span><br><span class="line">                fontsize = <span class="number">14</span></span><br><span class="line">               )</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-12-04-091058.png" alt="image-20191204171057689"></p>
<ul>
<li>Q3</li>
</ul>
<p>Create a Choropleth map to visualize crime in San Francisco.</p>
<blockquote>
<p>Before you are ready to start building the map, let’s restructure the data so that it is in the right format for the Choropleth map. Essentially, you will need to create a dataframe that lists each neighborhood in San Francisco along with the corresponding total number of crimes.</p>
<p>Based on the San Francisco crime dataset, you will find that San Francisco consists of 10 main neighborhoods, namely:</p>
<ol>
<li>Central,</li>
<li>Southern,</li>
<li>Bayview,</li>
<li>Mission,</li>
<li>Park,</li>
<li>Richmond,</li>
<li>Ingleside,</li>
<li>Taraval,</li>
<li>Northern, and,</li>
<li>Tenderloin.</li>
</ol>
<p>Convert the San Francisco dataset, which you can also find here, <a href="https://cocl.us/sanfran_crime_dataset" target="_blank" rel="noopener">https://cocl.us/sanfran_crime_dataset</a>, into a <em>pandas</em> dataframe that represents the total number of crimes in each neighborhood.</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Read in the data set</span></span><br><span class="line">df_sfc = pd.read_csv(<span class="string">'https://ibm.box.com/shared/static/nmcltjmocdi8sd5tk93uembzdec8zyaq.csv'</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">'Dataset downloaded and read into a pandas dataframe!'</span>)</span><br><span class="line">df_sfc.head()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Assigning a variable with the total counts of each Neighborhood</span></span><br><span class="line">df_neig= df_sfc[<span class="string">'PdDistrict'</span>].value_counts()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Assigning the values of the variable to a Pandas Data frame</span></span><br><span class="line">df_neig1 = pd.DataFrame(data=df_neig.values, index = df_neig.index, columns=[<span class="string">'Count'</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># Reindexing the data frame to the requirement</span></span><br><span class="line">df_neig1 = df_neig1.reindex([<span class="string">"CENTRAL"</span>, <span class="string">"NORTHERN"</span>, <span class="string">"PARK"</span>, <span class="string">"SOUTHERN"</span>, <span class="string">"MISSION"</span>, <span class="string">"TENDERLOIN"</span>, <span class="string">"RICHMOND"</span>, <span class="string">"TARAVAL"</span>, <span class="string">"INGLESIDE"</span>, <span class="string">"BAYVIEW"</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># Resetting the index</span></span><br><span class="line">df_neig1 = df_neig1.reset_index()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Assignming the column names</span></span><br><span class="line">df_neig1.rename(&#123;<span class="string">'index'</span>: <span class="string">'Neighborhood'</span>&#125;, axis=<span class="string">'columns'</span>, inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># View the data frame</span></span><br><span class="line">df_neig1</span><br></pre></td></tr></table></figure>

<p><img src="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-12-04-091507.png" alt="image-20191204171507096"></p>
<ul>
<li>Q4</li>
</ul>
<p>Proceed with creating the Choropleth map.</p>
<blockquote>
<p>As you learned in the Choropleth maps lab, you will need a GeoJSON file that marks the boundaries of the different neighborhoods in San Francisco. In order to save you the hassle of looking for the right file, I already downloaded it for you and I am making it available via this link: <a href="https://cocl.us/sanfran_geojson" target="_blank" rel="noopener">https://cocl.us/sanfran_geojson</a>.</p>
<p>For the map, make sure that:</p>
<ul>
<li>it is centred around San Francisco,</li>
<li>you use a zoom level of 12,</li>
<li>you use fill_color = ‘YlOrRd’,</li>
<li>you define fill_opacity = 0.7,</li>
<li>you define line_opacity=0.2, and,</li>
<li>you define a legend and use the <strong>default threshold scale</strong>.</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Load the packages for creating the Choropleth map</span></span><br><span class="line"><span class="keyword">import</span> folium</span><br><span class="line"></span><br><span class="line"><span class="comment"># Read in the GeoJSON file</span></span><br><span class="line">geojson = <span class="string">r'https://cocl.us/sanfran_geojson'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Create the map centering San Fransico</span></span><br><span class="line">sf_map = folium.Map(location = [<span class="number">37.77</span>, <span class="number">-122.42</span>], zoom_start = <span class="number">12</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Display the map</span></span><br><span class="line">sf_map.choropleth(geo_data=geojson,</span><br><span class="line">                  data=df_neig1,</span><br><span class="line">                  columns=[<span class="string">'Neighborhood'</span>, <span class="string">'Count'</span>],</span><br><span class="line">                  key_on=<span class="string">'feature.properties.DISTRICT'</span>,</span><br><span class="line">                  fill_color=<span class="string">'YlOrRd'</span>, </span><br><span class="line">                  fill_opacity=<span class="number">0.7</span>, </span><br><span class="line">                  line_opacity=<span class="number">0.2</span>,</span><br><span class="line">                  legend_name=<span class="string">'Crime Rate in San Francisco'</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">sf_map</span><br></pre></td></tr></table></figure>

<p><img src="https://tencent-hb666-1253906972.cos.ap-chengdu.myqcloud.com/2019-12-04-092007.png" alt="image-20191204172006969"></p>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2020-09-30T01:39:00.174Z" itemprop="dateUpdated">2020-09-30 09:39:00</time>
</span><br>


        
        这里可以写作者留言，标签和 hexo 中所有变量及辅助函数等均可调用，示例：<a href="/2019/11/30/data-visualization/" target="_blank" rel="external">http://bingcs.com/2019/11/30/data-visualization/</a>
        
    </div>
    
    <footer>
        <a href="http://bingcs.com">
            <img src="/img/avatar.jpg" alt="Hu Bing">
            Hu Bing
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Data-Science/">Data Science</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://bingcs.com/2019/11/30/data-visualization/&title=《Data Visualization》 — Bing's Blog&pic=http://bingcs.com/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://bingcs.com/2019/11/30/data-visualization/&title=《Data Visualization》 — Bing's Blog&source=Innovating Today．Imagining Tomorrow" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://bingcs.com/2019/11/30/data-visualization/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Data Visualization》 — Bing's Blog&url=http://bingcs.com/2019/11/30/data-visualization/&via=http://bingcs.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://bingcs.com/2019/11/30/data-visualization/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2019/12/16/GRE-Notes/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">GRE Notes</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2019/11/27/datetime-format-tran-py/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Date-time Transformation in CSV file</h4>
      </a>
    </div>
  
</nav>



    




















</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢大爷~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.jpg" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.jpg" data-alipay="/img/alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>This blog is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Hu Bing &copy; 2015 - 2020</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://bingcs.com/2019/11/30/data-visualization/&title=《Data Visualization》 — Bing's Blog&pic=http://bingcs.com/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://bingcs.com/2019/11/30/data-visualization/&title=《Data Visualization》 — Bing's Blog&source=Innovating Today．Imagining Tomorrow" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://bingcs.com/2019/11/30/data-visualization/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Data Visualization》 — Bing's Blog&url=http://bingcs.com/2019/11/30/data-visualization/&via=http://bingcs.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://bingcs.com/2019/11/30/data-visualization/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="//api.qrserver.com/v1/create-qr-code/?data=http://bingcs.com/2019/11/30/data-visualization/" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = '死鬼去哪里了！';
            clearTimeout(titleTime);
        } else {
            document.title = '(つェ⊂)咦!又好了!';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
